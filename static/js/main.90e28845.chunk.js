(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{107:function(e,t,n){},110:function(e,t,n){"use strict";n.r(t);var r=n(0),a=n.n(r),s=n(33),c=n.n(s),o=n(16),i=n(24),u=n(13),l=n(10),d=n(30),v=n(48),m=n(31),p=n(12),y={surveyList:{surveys:[],loading:!1,error:null,success:!1,currentSurvey:null}},h=Object(u.combineReducers)({routing:m.routerReducer,survey:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:y,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"FETCH_SURVEYS":return Object(p.a)({},e,{surveyList:{surveys:t.payload.surveys,error:null,loading:!1,currentSurvey:null}});case"SINGLE_SURVEY":var n=Object.assign({},e),r=n.surveyList.surveys,a=t.payload;return n.surveyList.currentSurvey=a.data,r.filter(function(e){return e.id===a.surveyId&&(e.questions=a.data.questions),e}),Object(p.a)({},n);case"SUBMIT_SURVEY":return Object(p.a)({},e,{success:!0});case"SURVEYS_ERROR":case"SURVEY_ERROR":case"SUBMIT_ERROR":return Object(p.a)({},e,{error:!0});default:return e}}}),f=Object(l.a)(),E=Object(i.routerMiddleware)(f),b=Object(u.applyMiddleware)(d.a,E),S=Object(u.createStore)(Object(i.connectRouter)(f)(h),Object(v.composeWithDevTools)(b)),O=(n(70),n(73),n(75),n(4)),g=n(5),j=n(7),k=n(6),R=n(8),w=(n(77),n(114)),I=n(112),N=n(113),T=function(){return r.createElement("div",{className:"loading"},r.createElement("h1",{className:"text-center","data-testid":"loading-text"},"Loading..."))},x=n(111),L=function(e){var t=e.surveys;return t?t.map(function(e,t){return r.createElement("div",{key:t,className:"col-lg-4 col-md-4 col-sm-4 col-xs-12"},r.createElement("div",{className:"box-part text-center"},r.createElement("i",{className:"glyphicon glyphicon-list-alt gi-3x","aria-hidden":"true"}),r.createElement("div",{className:"title"},r.createElement("h3",null,e.title," ")),r.createElement("div",{className:"text"},e.tagline," "),r.createElement(x.a,{to:"/surveys/".concat(e.id)},"Take Survey")))}):r.createElement("span",{className:"text-center"}," no surveys ")},U=n(22),F=n.n(U),q="https://private-5fb3f-surveysmock.apiary-mock.com/api",C=F.a.create({baseURL:q,headers:{"Content-Type":"application/json"},timeout:0});C.interceptors.response.use(function(e){return e},function(e){return"undefined"===typeof e?Promise.reject(e):"undefined"===typeof e.response?Promise.reject(e.response):401===e.response.status?Promise.reject(e.response):403===e.response.status?Promise.reject(e.response):(e.response.status,Promise.reject(e.response))});var Y=C,_=(F.a.CancelToken,"FETCH_SURVEYS"),P="SINGLE_SURVEY",V="SUBMIT_SURVEY",B="SURVEYS_ERROR",M="SURVEY_ERROR",G="SUBMIT_ERROR";var W=n(18),H=function(e){function t(){return Object(O.a)(this,t),Object(j.a)(this,Object(k.a)(t).apply(this,arguments))}return Object(R.a)(t,e),Object(g.a)(t,[{key:"render",value:function(){var e=this.props.question,t=e.title,n=e.options,a=e.id;return r.createElement("div",null,r.createElement("h3",{className:"question-title"},t),r.createElement("div",null,n.map(function(e,t){return r.createElement("div",{className:"radio",key:t},r.createElement("label",null,r.createElement(W.a,{type:"radio",name:"".concat(a),component:"input",value:e}),e))})))}}]),t}(r.Component),D=function(e){function t(){var e;return Object(O.a)(this,t),(e=Object(j.a)(this,Object(k.a)(t).call(this))).state={intervalId:0},e}return Object(R.a)(t,e),Object(g.a)(t,[{key:"scrollStep",value:function(){0===window.pageYOffset&&clearInterval(this.state.intervalId),window.scroll(0,window.pageYOffset-this.props.scrollStepInPx)}},{key:"scrollToTop",value:function(){var e=setInterval(this.scrollStep.bind(this),this.props.delayInMs);this.setState({intervalId:e})}},{key:"render",value:function(){var e=this;return r.createElement("button",{title:"Back to top",className:"scroll",onClick:function(){e.scrollToTop()}},r.createElement("span",{className:"arrow-up glyphicon glyphicon-chevron-up"}))}}]),t}(r.Component),A=n(15),Q=n.n(A),J=function(e){function t(){return Object(O.a)(this,t),Object(j.a)(this,Object(k.a)(t).apply(this,arguments))}return Object(R.a)(t,e),Object(g.a)(t,[{key:"renderError",value:function(){return r.createElement("div",null,"Error!")}},{key:"renderLoading",value:function(){return r.createElement("div",null,"Loading...")}},{key:"renderSuccess",value:function(){return r.createElement("div",null,r.createElement("h1",null,"Submit Success!"))}},{key:"render",value:function(){var e=this.props,t=e.survey,n=e.isLoading,a=e.error,s=e.handleSubmit,c=e.isSuccess,o=t.title,i=t.tagline,u=t.questions;if(n)return this.renderLoading();if(a){A.notify.show("All questions should be answered ! ","custom",2e3,{background:"#e3c23f",text:"#FFFFFF"})}if(!t)return r.createElement("div",null);if(c){A.notify.show("Thanks for answering the survey! ","custom",2e3,{background:"#0E1717",text:"#FFFFFF"});setTimeout(function(){window.location.href="/dalia-workshop"},2100)}return r.createElement("div",{className:"Survey"},r.createElement("br",null),r.createElement("form",{onSubmit:s},r.createElement("header",null,r.createElement("div",{className:"inline-block"}," ",r.createElement(x.a,{to:"/surveys"}," Home")," | Survey Question"," "),r.createElement("h3",null," ",o," "),r.createElement("p",null,i)),r.createElement("ul",{className:"list-unstyled"},u.map(function(e){return r.createElement("li",{key:e.id},r.createElement("div",{className:"question clearfix"},r.createElement(H,{question:e})))})),r.createElement("div",{className:"form-group"},r.createElement("input",{type:"submit",className:"btn btn-primary"}))),r.createElement(D,{scrollStepInPx:"50",delayInMs:"16.66"}))}}]),t}(r.Component),$=Object(W.b)({mapPropsToValues:function(){},handleSubmit:function(e,t){var n=t.props;Object.keys(e).length===n.survey.questions.length&&n.handleSubmit(n.survey.id,e)}})(J),z={surveyList:{surveys:[],loading:!1,error:null,success:!1,currentSurvey:null}},K=Object(u.combineReducers)({routing:m.routerReducer,survey:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:z,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"FETCH_SURVEYS":return Object(p.a)({},e,{surveyList:{surveys:t.payload.surveys,error:null,loading:!1,currentSurvey:null}});case"SINGLE_SURVEY":var n=Object.assign({},e),r=n.surveyList.surveys,a=t.payload;return n.surveyList.currentSurvey=a.data,r.filter(function(e){return e.id===a.surveyId&&(e.questions=a.data.questions),e}),Object(p.a)({},n);case"SUBMIT_SURVEY":return Object(p.a)({},e,{success:!0});case"SURVEYS_ERROR":case"SURVEY_ERROR":case"SUBMIT_ERROR":return Object(p.a)({},e,{error:!0});default:return e}}}),X=(n(107),function(){return r.createElement("div",{className:"loading"},r.createElement("h1",{className:"text-center","data-testid":"loading-text"},"Loading..."))}),Z=function(e){var t=e.surveys;return t?t.map(function(e,t){return r.createElement("div",{key:t,className:"col-lg-4 col-md-4 col-sm-4 col-xs-12"},r.createElement("div",{className:"box-part text-center"},r.createElement("i",{className:"glyphicon glyphicon-list-alt gi-3x","aria-hidden":"true"}),r.createElement("div",{className:"title"},r.createElement("h3",null,e.title," ")),r.createElement("div",{className:"text"},e.tagline," "),r.createElement(x.a,{to:"/surveys/".concat(e.id)},"Take Survey")))}):r.createElement("span",{className:"text-center"}," no surveys ")},ee="https://private-5fb3f-surveysmock.apiary-mock.com/api",te=F.a.create({baseURL:ee,headers:{"Content-Type":"application/json"},timeout:0});te.interceptors.response.use(function(e){return e},function(e){return"undefined"===typeof e?Promise.reject(e):"undefined"===typeof e.response?Promise.reject(e.response):401===e.response.status?Promise.reject(e.response):403===e.response.status?Promise.reject(e.response):(e.response.status,Promise.reject(e.response))});var ne=te,re=(F.a.CancelToken,"FETCH_SURVEYS"),ae="SINGLE_SURVEY",se="SUBMIT_SURVEY",ce="SURVEYS_ERROR",oe="SURVEY_ERROR",ie="SUBMIT_ERROR";var ue=function(e){function t(){return Object(O.a)(this,t),Object(j.a)(this,Object(k.a)(t).apply(this,arguments))}return Object(R.a)(t,e),Object(g.a)(t,[{key:"render",value:function(){var e=this.props.question,t=e.title,n=e.options,a=e.id;return r.createElement("div",null,r.createElement("h3",{className:"question-title"},t),r.createElement("div",null,n.map(function(e,t){return r.createElement("div",{className:"radio",key:t},r.createElement("label",null,r.createElement(W.a,{type:"radio",name:"".concat(a),component:"input",value:e}),e))})))}}]),t}(r.Component),le=function(e){function t(){var e;return Object(O.a)(this,t),(e=Object(j.a)(this,Object(k.a)(t).call(this))).state={intervalId:0},e}return Object(R.a)(t,e),Object(g.a)(t,[{key:"scrollStep",value:function(){0===window.pageYOffset&&clearInterval(this.state.intervalId),window.scroll(0,window.pageYOffset-this.props.scrollStepInPx)}},{key:"scrollToTop",value:function(){var e=setInterval(this.scrollStep.bind(this),this.props.delayInMs);this.setState({intervalId:e})}},{key:"render",value:function(){var e=this;return r.createElement("button",{title:"Back to top",className:"scroll",onClick:function(){e.scrollToTop()}},r.createElement("span",{className:"arrow-up glyphicon glyphicon-chevron-up"}))}}]),t}(r.Component),de=function(e){function t(){return Object(O.a)(this,t),Object(j.a)(this,Object(k.a)(t).apply(this,arguments))}return Object(R.a)(t,e),Object(g.a)(t,[{key:"renderError",value:function(){return r.createElement("div",null,"Error!")}},{key:"renderLoading",value:function(){return r.createElement("div",null,"Loading...")}},{key:"renderSuccess",value:function(){return r.createElement("div",null,r.createElement("h1",null,"Submit Success!"))}},{key:"render",value:function(){var e=this.props,t=e.survey,n=e.isLoading,a=e.error,s=e.handleSubmit,c=e.isSuccess,o=t.title,i=t.tagline,u=t.questions;if(n)return this.renderLoading();if(a){A.notify.show("All questions should be answered ! ","custom",2e3,{background:"#e3c23f",text:"#FFFFFF"})}if(!t)return r.createElement("div",null);if(c){A.notify.show("Thanks for answering the survey! ","custom",2e3,{background:"#0E1717",text:"#FFFFFF"});setTimeout(function(){window.location.href="/dalia-workshop"},2100)}return r.createElement("div",{className:"Survey"},r.createElement("br",null),r.createElement("form",{onSubmit:s},r.createElement("header",null,r.createElement("div",{className:"inline-block"}," ",r.createElement(x.a,{to:"/surveys"}," Home")," | Survey Question"," "),r.createElement("h3",null," ",o," "),r.createElement("p",null,i)),r.createElement("ul",{className:"list-unstyled"},u.map(function(e){return r.createElement("li",{key:e.id},r.createElement("div",{className:"question clearfix"},r.createElement(ue,{question:e})))})),r.createElement("div",{className:"form-group"},r.createElement("input",{type:"submit",className:"btn btn-primary"}))),r.createElement(le,{scrollStepInPx:"50",delayInMs:"16.66"}))}}]),t}(r.Component),ve=Object(W.b)({mapPropsToValues:function(){},handleSubmit:function(e,t){var n=t.props;Object.keys(e).length===n.survey.questions.length&&n.handleSubmit(n.survey.id,e)}})(de),me=function(e){function t(e,n){var r;return Object(O.a)(this,t),(r=Object(j.a)(this,Object(k.a)(t).call(this,e,n))).state={loading:!0,surveys:[],surveyId:"",currentSurvey:null,error:""},r}return Object(R.a)(t,e),Object(g.a)(t,[{key:"componentDidMount",value:function(){var e=this;this.setState({surveyId:"001"}),this.props.fetchSurveys().then(function(){e.props.fetchSurveyById("001")})}},{key:"submitSurvey",value:function(e,t){this.props.submitSurvey(e,t)}},{key:"handleError",value:function(){this.setState({error:"all questions are necessary"})}},{key:"componentWillReceiveProps",value:function(e){var t=this.state.surveyId,n=this.props.currentSurvey;(t&&"001"!==t||"001"!==t)&&(this.setState({surveyId:"001",error:""}),n?"001"!==n.id&&this.props.fetchSurveyById("001"):this.props.fetchSurveyById("001")),this.setState({loading:e.loading})}},{key:"render",value:function(){var e=this.props,t=e.surveys,n=e.isSuccess,r=e.currentSurvey,s=this.state,c=s.loading,o=s.surveyId,i=s.error;return console.log(r,o),a.a.createElement("div",{className:"box"},a.a.createElement("div",{className:"container"},a.a.createElement(Q.a,null),a.a.createElement("br",null),"  ",a.a.createElement("br",null),"  ",a.a.createElement("br",null),a.a.createElement("h3",{className:"text-center"},"  "),a.a.createElement("div",{className:"row"},c?a.a.createElement(X,null):o&&r?a.a.createElement(ve,{survey:r,isLoading:c,error:i,handleError:this.handleError.bind(this),handleSubmit:this.submitSurvey.bind(this),isSuccess:n}):a.a.createElement(Z,{surveys:t}))))}}]),t}(r.Component),pe=Object(o.connect)(function(e){return{surveys:e.survey.surveyList.surveys,loading:e.survey.surveyList.loading,currentSurvey:e.survey.surveyList.currentSurvey,isSuccess:e.survey.success}},function(e){return{fetchSurveys:function(){return e(function(e){return ne.request({method:"GET",url:"".concat(ee,"/surveys")}).then(function(t){e({type:re,payload:t.data})}).catch(function(t){e({type:ce,payload:t})})})},fetchSurveyById:function(t){return e(function(e){return function(t){return ne.request({method:"GET",url:"".concat(ee,"/surveys/").concat(e)}).then(function(n){var r={data:n.data.survey,surveyId:e};t({type:ae,payload:r})}).catch(function(e){t({type:oe,payload:e})})}}(t))},submitSurvey:function(t,n){return e(function(e,t){return function(n){return ne.request({method:"POST",url:"".concat(ee,"/surveys/").concat(e,"/completions"),data:t}).then(function(e){n({type:se,payload:e.data})}).catch(function(e){n({type:ie,payload:e})})}}(t,n))}}})(me),ye=function(){return a.a.createElement(w.a,{basename:"/dalia-workshop"},a.a.createElement(I.a,null,a.a.createElement(N.a,{exact:!0,path:"/",component:pe}),a.a.createElement(N.a,{exact:!0,path:"/surveys",component:pe}),a.a.createElement(N.a,{exact:!0,path:"/surveys/:id",component:pe})))},he=function(e){function t(){return Object(O.a)(this,t),Object(j.a)(this,Object(k.a)(t).apply(this,arguments))}return Object(R.a)(t,e),Object(g.a)(t,[{key:"render",value:function(){return a.a.createElement(ye,this.props)}}]),t}(r.Component),fe=function(e){function t(e){var n;return Object(O.a)(this,t),(n=Object(j.a)(this,Object(k.a)(t).call(this,e))).store=Object(u.createStore)(K,Object(u.applyMiddleware)(d.a)),n}return Object(R.a)(t,e),Object(g.a)(t,[{key:"render",value:function(){return a.a.createElement(o.Provider,{store:this.store},a.a.createElement(he,null))}}]),t}(r.Component),Ee=function(e){function t(e,n){var r;return Object(O.a)(this,t),(r=Object(j.a)(this,Object(k.a)(t).call(this,e,n))).state={loading:!0,surveys:[],surveyId:"",currentSurvey:null,error:""},r}return Object(R.a)(t,e),Object(g.a)(t,[{key:"componentDidMount",value:function(){var e=this,t=this.props.match.params.id;this.setState({surveyId:t}),t?this.props.fetchSurveys().then(function(){e.props.fetchSurveyById(t)}):this.props.fetchSurveys()}},{key:"submitSurvey",value:function(e,t){this.props.submitSurvey(e,t)}},{key:"handleError",value:function(){this.setState({error:"all questions are necessary"})}},{key:"componentWillReceiveProps",value:function(e){var t=e.match.params.id,n=this.state.surveyId,r=this.props.currentSurvey;t||this.setState({surveyId:null}),(t&&n&&t!==n||t&&t!==n)&&(this.setState({surveyId:t,error:""}),r?r.id!==t&&this.props.fetchSurveyById(t):this.props.fetchSurveyById(t)),this.setState({loading:e.loading})}},{key:"render",value:function(){var e=this.props,t=e.surveys,n=e.isSuccess,r=e.currentSurvey,s=this.state,c=s.loading,o=s.surveyId,i=s.error;return a.a.createElement("div",{className:"box"},a.a.createElement("div",{className:"container"},a.a.createElement(Q.a,null),a.a.createElement("h3",{className:"text-center"}," Dalia's Survey "),a.a.createElement("div",{className:"row"},c?a.a.createElement(T,null):o&&r?a.a.createElement($,{survey:r,isLoading:c,error:i,handleError:this.handleError.bind(this),handleSubmit:this.submitSurvey.bind(this),isSuccess:n}):a.a.createElement("div",{className:"row"},a.a.createElement(L,{surveys:t}),a.a.createElement(fe,null)))))}}]),t}(r.Component),be=Object(o.connect)(function(e){return{surveys:e.survey.surveyList.surveys,loading:e.survey.surveyList.loading,currentSurvey:e.survey.surveyList.currentSurvey,isSuccess:e.survey.success}},function(e){return{fetchSurveys:function(){return e(function(e){return Y.request({method:"GET",url:"".concat(q,"/surveys")}).then(function(t){e({type:_,payload:t.data})}).catch(function(t){e({type:B,payload:t})})})},fetchSurveyById:function(t){return e(function(e){return function(t){return Y.request({method:"GET",url:"".concat(q,"/surveys/").concat(e)}).then(function(n){var r={data:n.data.survey,surveyId:e};t({type:P,payload:r})}).catch(function(e){t({type:M,payload:e})})}}(t))},submitSurvey:function(t,n){return e(function(e,t){return function(n){return Y.request({method:"POST",url:"".concat(q,"/surveys/").concat(e,"/completions"),data:t}).then(function(e){n({type:V,payload:e.data})}).catch(function(e){n({type:G,payload:e})})}}(t,n))}}})(Ee),Se=function(){return a.a.createElement(w.a,{basename:"/dalia-workshop"},a.a.createElement(I.a,null,a.a.createElement(N.a,{exact:!0,path:"/",component:be}),a.a.createElement(N.a,{exact:!0,path:"/surveys",component:be}),a.a.createElement(N.a,{exact:!0,path:"/surveys/:id",component:be})))},Oe=function(e){function t(){return Object(O.a)(this,t),Object(j.a)(this,Object(k.a)(t).apply(this,arguments))}return Object(R.a)(t,e),Object(g.a)(t,[{key:"render",value:function(){return a.a.createElement(Se,this.props)}}]),t}(r.Component),ge=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function je(e){navigator.serviceWorker.register(e).then(function(e){e.onupdatefound=function(){var t=e.installing;t.onstatechange=function(){"installed"===t.state&&(navigator.serviceWorker.controller?console.log("New content is available; please refresh."):console.log("Content is cached for offline use."))}}}).catch(function(e){console.error("Error during service worker registration:",e)})}c.a.render(a.a.createElement(o.Provider,{store:S},a.a.createElement(i.ConnectedRouter,{history:f},a.a.createElement(Oe,null))),document.getElementById("root")),function(){if("serviceWorker"in navigator){if(new URL("/dalia-workshop",window.location).origin!==window.location.origin)return;window.addEventListener("load",function(){var e="".concat("/dalia-workshop","/service-worker.js");ge?(function(e){fetch(e).then(function(t){404===t.status||-1===t.headers.get("content-type").indexOf("javascript")?navigator.serviceWorker.ready.then(function(e){e.unregister().then(function(){window.location.reload()})}):je(e)}).catch(function(){console.log("No internet connection found. App is running in offline mode.")})}(e),navigator.serviceWorker.ready.then(function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://goo.gl/SC7cgQ")})):je(e)})}}()},51:function(e,t,n){e.exports=n(110)},75:function(e,t,n){},77:function(e,t,n){}},[[51,2,1]]]);
//# sourceMappingURL=main.90e28845.chunk.js.map